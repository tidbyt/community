"""
Applet: KEXPlaying
Summary: KEXP Now Playing
Description: Displays song, artist, and info currently streaming on kexp.org.
Author: Ken Winke
"""

load("encoding/base64.star", "base64")
load("http.star", "http")
load("render.star", "render")

KEXP_PLAY = "https://api.kexp.org/v2/plays/?format=json&limit=2"
KEXP_SHOW = "https://api.kexp.org/v1/show.json?limit=1"

KEXP_LOGO = base64.decode("iVBORw0KGgoAAAANSUhEUgAAAFQAAABwCAYAAACAVlfhAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABc1JREFUeJztnVtoHUUYgL/YGGOtplFKL5FUvNAWbGyM9dJqEROtD8YbgiCIPqngiy8i6IM+iTfEV/VVX40XaJQqjdqo1EZKq61CHizYtKbVWmtSk9iOD5PUc+b8s7vn7L/JOfh/cCDn39nZPx87c2Z2lt0m5xwNyKqc+x8BzmgkEtLUoELzJt0BjGkkEnJOEZX+nzGhyphQZUyoMiZUGROqTDPQCdyZo46jwIBOOo1PM3AN8GaOOr7DhJ7FmrwyJlQZE6qMCVXGhCrTvNAJ1BnvAOty7P+UCS1nHXBtjv2XWpNXxoQqY0KVMaHKmFBlTKgyJlQZE6qMCVWmSKE9+BsSav0UciNC0dgZqowJVcaEKmNClTGhyphQZUyoMiZUGROqjAlVxoQqY0KVMaHKmFBlTKgyJlQZE6qMCVXGhCpjQpUxocqYUGVMqDImVBkTqowJVcaEKmNClTGhyphQZUyoMiZUGROqjAlVxoQqY0KVMaHKmFBlTKgyJlQZE6qMCVXGhCpjQpUxocqYUGWanHNtwJU56pgAfhTii8n3lK5pYF9kW0+OegH2AjNCfC1wQY56Rxv1xQB1izV5ZUyoMiZUGROqzNxj158Ttv0BPFPy/THkX9dXgdGEY7wCLK0yry/wz/KM8RpwoRB/Hfip5PtNwKNCuXdnjyHRBTyZkt80/iEz24HdZVuccz1O5pBzjpLPfqHMGedce1Au/IxF6k/irZQ6ByL7PRGUeyNSbk1C3f1V5rrdOdcxt3/WJt8GrBHiB4DjGevQZDAS7w6+3yKU+Z7yszgvfcCneEeZhW6MlP1GKalq2Yb8kqpSoUvwzTekiJcYrAWehuxCb4jEF0roL/gzLWQ9/z1XejPyM6aLeivEI0QOKHF9JJ5H6CTylBXgYIb9t+EFltKK75p+QG7uPwN7MuYXcgx4D7gIeIBKd5cCK7IK3SjETgL7a0wOvMw8c/JBykchc3QTFzpA7e+zOwg8Pvt3K3CvUGZZlia/GlgpxHcBp2vLTYVh/NAupBtoAa4Ttmk19/FIvCWL0CKauwb/4H9dQzbgW9TiID4OfFV0Uo0sFOThUzewRYh/wDy0qCxCY7/wuzQTqZFBKvvEduAhoez7xaeTLnQR8psHRon3I/PJYeRf7auD7yeBz4pPJ33YtB75CrZGc28D+oPYLuDXKusZpHKGFPIRMFVlvTWRJrTI/vMK4MMgdjf+n6+GQeDZlDLz9Yo3l9bk622GJPE18FvC9ingE+Vjxq6e/VnLGXoKv8hVL5zGD58ejGwfwfeheVmBn0gsw7ekkBlgLEnoYmC5EN+DvGK4kOwlLrQLP9CfznmMDuClhO3DwGRSkz8FnIhUXG/0JWxbAmyahxxehuRhk0OeWXSSbx1/jhn8sKf083cN9VyMPG8vZWsN9VbDi8DHkD4OHY7EexWS2AesCj7ba6inn/TRShFCHX75435KlpDSEvkyEu8l39tqNbknQ5kN+As8h3Mc5wDw8OzfU/g1pd/DQmlCd+ObYWsQvw1/dp/JkaAG5wN3ZCjXhD8Jkhb+0pjEjxgSSWvyU8C3QvwSKi/uLgR9VM7kjiKvcxXdjwLZLo7sjMQ1+tG83CfEPke+cHM7/kwtlEYWugi4S4jvQBa6HN+XFkoWocPI1xG3AOfqplMVm/GzlpAh5G4K5qHZZ1lTOoFfowmXZJfgp6axoVUaK4EXIttGSL9IIv26j+N/jY9F9tlK8mwnN1kX6XYir3H3kk/o85Ftb5MuVFok24EfH47jVzgvC7Zvwp8If2VNslqyrsvXWz/aBVwuxIdK/pb60Rbg1gLyOUtWobEbq24k3y3UtSKdneDP0DliSzSF9qNZhR5CvvmgBbhZL53MSP3nYcrvWaproVA/zb4TecljKPg+gl9qDrkKubtQock5dx7yJbnTlJ+V7bOfkAmS14GW48eM1TCBfOkQ/HXaFUL8OJUzpNWRYx/BTyWrqX8K31IT+RfTzSBzEBaRWAAAAABJRU5ErkJggg==")
KEXP_VINYL = base64.decode("iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAANbY1E9YMgAAAYRpQ0NQSUNDIFByb2ZpbGUAACiRlZHPSwJBFMe/a4gXyw4S0Wmh8GQhClEQgXqIwIOJh4ouu+v6A2xd1ukXdSzoKHSyU+ilQ+e6+gcUIUVBRNe6S11Ktjc7lkZU9IXhfebNmzcz3wFcx4ppFl2DwKrBrNRcTF5cWpY9j3DDB0eKVjajyWSC80f8qpcbSDxejfNe39d/lTejlzVA8hMzzbQY8T7x6AYzOZ8Q+y26FHGDc07wNWdV8JNTk07Fid+IB9a1HO11eYlDRqZgEM8Qz2p5JUO8QxxUe+pzPSzu42gkrhQLqqUwPSNza+KlYskqm4qm//ORf4npm4zHeMncsgq5PJOj5KQuzxvaRFAOh8IRgP+LqG4tOH5LQ+fdXKkGTD0DfZVuTq0CZ3vA8F03N3YE+HaB00ttzVrvHC9JTUB4JubiPx3CTyx8dTQJ1G+B9DaQuACqh0AgS+esAMl+yk9DarLP0VE5GwmLXt4Y4H6w7VYA8BwA7Yptv9Zsu12n99wDDeMdtvJxXuypS0gAAACKZVhJZk1NACoAAAAIAAUBEgADAAAAAQABAAABGgAFAAAAAQAAAEoBGwAFAAAAAQAAAFIBMQACAAAAEQAAAFqHaQAEAAAAAQAAAGwAAAAAAAAASAAAAAEAAABIAAAAAUFkb2JlIEltYWdlUmVhZHkAAAACoAIABAAAAAEAAABAoAMABAAAAAEAAABAAAAAALNyQRIAAAAJcEhZcwAACxMAAAsTAQCanBgAAAItaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIEltYWdlUmVhZHk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzI8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KYOtP2QAAFwJJREFUeAG1m1lwVVd2hve9VxMgMc+gCTOawSaAwd3GpqpxdQMVu8spV6ry1pV05SkPqTzkpR+chpd0nOCkUq7O5KTKLx3ouNsVcBoabKBjwIUxbYQxRsIIkBgEQkxCupLuvfm/dc66OhKaSONNbe1z9l577fX/e+3xXEJ48iEllaVr1qwpHUH1ZJXNVKyJI8/kpRUfCbEu9KH7iYYnrbD0jTfeyCnmYyvRv1RxdUVZ2Yo58+YtTKVSC/L5/BTllVdUVIxD7uHDh13Ky6bT6bt6bens7PxScp/funXrlN7PKRYUCegrUezl5UmEJ0EAOjKKfQmDVgjMazU1NdsqKytXKI5XCCUlJaGvry/09PaG3p6e0KPIu8dcLhc8qn7o7e19KGLOKO8DkfFf0n8m0QZE5BSdnETR2B9/VwJKCoVCTr3lRrwyd+7cP5s+ffqLM2bMKBPwUFpqIwGPyAloobu7Ozx48CCVzWY9ArRAVF6hq6sL61MiIJ2JQigrKwtqp0f1j6juP8pj3o8hDkV+XDS25P9LAPVA1hM3s23+/Pk/qq6u3jBr1qwwYcIEEORkdV69l5bhxFQunw892WyQiweIEGCLeIIIKD6r14MipOYFPC+C0yIhoyET9EzdT6Rjh+rvidvHFjzQOyLOHj0ZctIZpVpaYxwCAF8vw362dt3aPes3rN+wdOnS3LRp03LKKwh8WuBLFTMCkVIMBQEjFQprwp71RApof6dQQAkZOUIp3oCH3LlzJycPyGkorZ80adJ/T5kyZZdEn1JkTkDpY+OJLFHNMQbGnY/1H9TV1b21YsWKiTNnzMiXlZfnBADAxXGsXrdnwJHfp+geIDe2HndPYE7IxnMCRHjELhFhkefYO3pFQmbcuHFpvd8XMX8h/f9CuULSxihnhL9MXmMN7mbI/1RL03bFcrk8szdzQVEXRsKshoEZDhhA4AHyaSYDc3kIIuL+Ngz0TF3kRwpqLwOhqtejaWK8hsbvq061dDEkmBghwVeikVSZ4IgCcSHgcbNyje9fPP/881vU+7ny8nImr3JkAOjBngEvMB76QQ0ERz5gAC7kw4Lvrx8NGZFAg+WaNPvkDSmR8Mcio1Zzwx8o/57imDxhLGPGwU+smlB1+MUXX9yycOFCXJBxWZJ0T8DKMFvuPD+ZAqJgc1sEwoaFet0JSIJE11gC3qf62NKrFWezOuUj1WNjxVCFhBHDaASggJ6vGD9h/K83vrRxfW1tbVa9VapoXT6U0UnQEMI7wfNFg/X0YALMC0zy8f5Ir5wtXyoOslVVVb8nEn4lDWy2IKE4NIfSOhIBlNmEp03Mz7/9rW8/p6WuW0aXe495OhQJckfzBgjwaHMChNgM0T/7A3woHUMZPFwe5Mory7UCdWslWq13VogyReaEYXEOW7Bp0yYv27F27dpt1fPn98jQCgeN0TQKUNLBAUAOCgI8IOnyTwK46xV42zBJt6aDip7Zs2dvVtnfxOWPGhgXDOcepc3NzfT+1mefffanGvMoZ8mx9dyBA36oADCiBRFhM3880UEgMz47PiLPTqoTNpROL6Nt1+1EQrDss11nTHaaHajs26A2mqTvc0WGc/+sHDfS3zVxRizIuJ8il//nxYsXh6rKStZ4A4+YuzfPgwOGurFDlinTDUcO8Bq7thx6vWS56wO0E+UeRRm2aMwPmHiVz5yQZ0eqOWGnmlyoOOR8MLgLcRVIgam/feaZZ76jAw1klNBo0jCe/V3lBhoj3WDyCJ7HMzoAYZuf7qwBRwf5ROqyL8ArCJQl9Xl7nlLHe971WEX9UT3OEqwMVVoap+v9PWU/0uGDCcBNYGqdDjT/tGrVqhQHGpQpzwyi0SQoz8eAZHTD3Vh2frfa20NbW1vQyS50dduhx3qOHtSuLnBi1Pg1UE6Uk0M7HtDNmEcWV/c2vH3kqKeQEgl06kqR7kdrMBc3I0kCEPQCtrjLNZHYkqf8Ym/4s7ujvycbTxrEwefSpUuhqakptN24Yb0PAGSGAufAKkSIpvRoh6ghQr7X8wmP3ve23A5PY3s4VfZIPqMOmKGO+6XKs4rFSTFJAM+4/modNP6BsS/20nLHFG5Jr3vPYwghbsSAuCGkAEPm6tWr4ezZs+GGgDsweowyToJ4BcMB/dRzkJTrFGS9Sy8TIJJydAPcn61Qf5K2DMpLSR7AC9TeCaVfKuIeBiJJgGf+aNGiRc9pj9+jXmaXZQY7CRiHNtZ0JiA32uUwEKIaGxsNPIbh2pTfvHnTSOno6AjyrjBv3rwwc+ZMm8TIa2lpCTrYFAHSFvoYIrQFaT7hyYQiaCfdSRhUlhLpzAUZtcEQ36tYvEghgwAmMqdIyWvaSADCwFMIIJQDwqJ6gp7EOAIpxrLcSSB89dVX4fz584H5g94COIS/9NJLgSV15apVYe6cOVZGXcgF+BdffBFOnz5t5PGsy5UiSM3m1g4rhgfatA6Rbdg3XJD+EuwVru+0t7evlNwnilQonuDY7+P+r2ir+wPd5rDscY63BkgJyfdkg+YRMgC3vXjxovU8BtPouXPnwtNPPx1effX75i1r16wJmzdvtjLIoUcnTpxoHrF69WobEt3aH0BUg0hwoukEnr0TkuRji7+bofrj9pEqpuSpOcmMF9GXNm3adLS5udkIiLowHg+qtxWDNC7taqo7G93asCzp5Gk9RW8R6QnyGcNdihjG7E7vs/4yNAC/devWsGXrlnD58uXwzn/8e2jVvMCcgDtjHK6Nvnv37oVr166FpgtN4Tf/+3GYPGVKePWVVwwPbTn52OdgPc87yMGTxsAtRZ5ow6e0dNOhQ4emIoIccwAk4P4qL98hN5lO5b7ePpv8IvDRRoVeILhyXL5PxgGeXR1ujzxLWmtra9i4cWPQ6TEcOXzEXPzv33orvPzyy2xOLDI3+PLHcIE47T1sXti1a1eoq6sL9fX14cSJEzaPANTb5hlQ/u52eR7v/pxIU7JvnDrt1/KCq/ICGwK4PwQsnzx58l/KuIyAFvpy/QTQW8ndWr6gFSEX7cw8n3Gu8WXjmhl76tSpcvtXw7Fjx6yXt2/fHp7R2KcexkMmxJF6BAykaP9h43/37t2htqY2VNdUGwnopA5yHpwAJ8TBej4peUR5GwRU6lrtuDz0zO3bt40AvAACNmn5+0N5gS5u8ik1NMADHKgNgd5oCEBMtkdRuzomMYwrkUuL2fD6669bXmNTY/jxX/04LFm8JNx/8CCyW/Y7iKShYsauzSBEK5EZfeDggbB0ydKQy+fC9evXbfPjJCR1oHiArkHvDDVIAJtsPaf0uDyhl1UgmuH0AYNJRgV2k0sjHmGX4EsR45tnb5BLDogg/6bmgXXr1gVNpOH9998Pf/LDH9okeP/+fatjivTHdToIe6e3FGWClW/bts16vu1mW1gsQk43NNjQcR3UHVKPC8QpMtLJpogLVTq8XiRUKu1k/NvA1oxcg7x6uqANQ8o3KdbL9LQi45uxjovLjQKgmLwedD4wQ2iI9ZwZnOGg7XTYpDkA73GgtCFhi5LH20iKZFJMT1GH+t/77ndtJ1mllaKmutryKSdQj+gB4py8ZOrl2EAnad6Zpbyqurq6jE+AjN1puDegAMnsnhz7lEEA0UlBBqJoDOV4DJPZHK3x7PlZ1qbLEwCDxwwKBS2bbFJsQDsQJ4qUvKeXLw+lMhrP0OnUCHcZ9CHjYHnGBtdFmpRFHvJEwiQ9ThKWmMqooNIBYrCNdYFOpl7uJJB679IQjTNRAZal7qmnnrJnM1BtFI2RrCxJ6Zo8Lw9ib06QvVFvIkekHpuyWdo1Mn9okjbCI/FIH4C8HqnHWKGLDkhVh2+S4DUPoFB5abvgBHBy7Puzp0lC/BkFmI4MszgBz2C54ypcVllMGJofr6Xy448/PrF8+fJ/02zcrj0/9w2MhyIITUa2+YEEyGYdJwCaAEmQjVuT55F8nikj9XdSqxct/+WyP+NbYWsUxt2dEOR5qOBGukwCmHlM8l2tF2fZiCb1bqxbZ4GpO3funK8xWQGZCpGFPClw3iAAnl2j2wMQ2oAQQJLveQ6Wejz7u6eGj0KRoA4rEgDzWZS6skhm9L/UIeqPCTMpoqNqYpXNA4CmF6JQxJfWdrewdMmSRTp2L2JOEQEFGVkUQJ7XroddtkNcsKBew6rN1HibEAAxeJ5XJaXc310PRBGRlX0s+8il8QAaLciAe+4uFI4l0AgKiTTKMsp2FhJmzphpZ4Kenv4VwIwzfzCcKX0mL/A5TEFFFqxZdBEwuKW1JVyVzpUrV4qABptjJGmk+uVJ7D0DQKPD9SCPLscnArql3k5VdI11j4RvUgHhxwnIYwB1IYAACbP1lfj06c9tCatQT0GShDSuYm/hWcBllFT0t5m0gZn/2LGjYZaOzNRv1gYL0HgYbfFMihcQeR4cAc4cEUdrS/beV9tFAqx1ueFFGpdBaaVRF2DiKIEGWA4ximqc8zkEjdNkyA9A9u7V8VtAkDMSkvok7005CaTIsZye08Fq9+6faye4xM4WrCy4PYRzboAAB5hJRy4OUM9zMhIEWOvCelt1ewU1R+8bAQJwPrbNB2zS1CGfMZ7GGMNMVBiG4RcuXLCDkb4nhPfeey8cPHgwVGpFcHBDKlMmJLKsokMrQ3j77beDfnNgZHKmmKP7AWSI+jQeEWCA1cOlRK7Co97GLieCVN9TmWPS2KpwXR6T1VA1AnyqbxJjHbCmBhAezs4B+S7H5glCIIL1/4BAQ8gLL7wQduzYEQ4eOMCPgsxo5DhJWornEPVOT7F0sud/88037Wi9fv162wIzrCbIqwCADHsCgLFJKilVylBQZKdrgFXGKoJ96umQ1t0oxGl55jb2uvKZfHqT27MHWsO3SbhaLp2XkjF5AobTIMPAlyXyMOgrDQWOt6zj7777rhnAeNahy3qLocHhSffXJg95nxw/Hv76Jz+xuWPLli3hzJkz4X8++MBIBTyRg9JE6eAzO+AMcAyWZwL9l05FEJARuYVe/UqltaXlmmz9ley7qPbanABS7QvTy6TgW+o5vGJMBESNRd5Cj0MCgd4EELfBSzSG6+vrw+HDh8OhQ4fCNfUwcox1Voy7d++GkydPhnfeeSf8p47AXIXR8+Tt2bMn1NXVmSxnEIYE73iN9y5o3RNJLV/my8dsgPNeWlJqZxwNz9/KvN/ItktKO5wAEPCtPyPD/0gVuBMoKlXZqAGWAUxgRqY+LknekSNH7HyAN/AOEG6KOOxQj4mTw9NHH31o5wcuSfbv3x+OHj0adEVnw8PvGLRzNHLxMgOq+h54JxKKz+IAr1BM6XxS0K3VPl3BNciTLkqs0wlg1qfmXRGwWUbNUW/2SUm/dhWOFmgIF6VxPIAfRZHHmP3ss8/scpT7P97pde4QuEbj6vzUqVM6hHXbCsIxmq00P7jCSzigUYeLEiZIX00gz4iQYTwnwbutsS0c8VO6r2wVkfvVQY3qiCuSsfuAoqwebnX39PxiXHn5ahQ+bsAYgGMwHkBPkkfAdTkq79u3b1S1yFIfMu/ff6BT4LywbNkyO2ewSrhOV+TAzWaRb+cPFboXYxNkywMaNPZvSO9tFdtyUDwLKMO8IN/Xt1cL5J+q5+ZJARv0pIxeRw4YxxDw4cBkiAE+SfItgB4kn8CzeYtSD7h7p05/47XWa6sc9H1S8iVGiPd0EjRAaZdoFyp0nvKQUVRxPq09xB3pP6P9w22R0U7TtJcEBwF0+3l5/y419OcIKPjwiN7G+NcBQgQgMRxD6UEMI89BZLPIREdv1LPJWaQvU3NF1kS5PsDwBlLXhT6GlwNHF3nKMAtZWWgPGXpf7n9KNl2WnusSYCdogkkCqEgmP4T4meJrqlyrdExegAHWA7FhvHvEEMowxoPLIlNWhpeMM+CMdZZJjtWUcVaIprVoYnNd6DFXl4w9Sz/y1luQoGdtjLjfS2sLfUsyJ6WzTXMPBPgdxAAPQA/LHzrOqef+VdvF7XrGatOrdEDwXvVMDAAk+Tx74Nl6J87gGbdnK0tvsyR6xHPQgedQzzYzcT1I4x03ZYK1FpDxhpSajPJETkF6Utf0HUKf3I5q8r0i8K0Swf198zfkD4goBHSrDFim8bxAbsfvgWn3kYCxGEoAWJIAA4CBik4K5UQIYK4gAp48FiIAEIsB0LF+8hxs0hNUwcSL4PWu9Tyve8v08aNHz2jX+aHKLgoGP7buUCw2MCQoCXBcbNN43amKrTKSH0L2ufGkDkhyRYARCHKi4HKkTobXI/Vnl2fjwr8kOEARvD7PnoccH2bYgPErVN6J8pKcPChz7ssvb/Xl8x9q6WzTe6OqDuh9dA1HAF7QqXhaM/LfKe2LSShO1W6QG+NgvbeGSp0IB+8pHYyDMYPzz3Wp3UdIAiATIe0SebYoEuJ8ieQzTY2NvXL9fZpTWuQJTVJ1WZGOHRDwu+ECYKH/ptiDgOcFiqPygOEAUIA4uCRwf6YBB8sz+QwBXN/HvJd76nU9BSzgSQmekkeMQ17105d0b6DN1Qea9Bq0/F6QLNtfJsKioFcYiQBkWAFosVVuViIS2CDxa7EiCQ7GDU2myWdVM+Ao5RkCAE9KNFk8gEGuFnknAtQjdT2Q5+BjAnTVUkjzTbKhoWF/xfjxJzU8rsjuz1SnRTHap7uCOB2NAMBTkc/lKMPYZ2MS+kgxHkBuMM/+Thvk+zvPBLyFeqSQ4HWsMPHH6yWy7NHdHuAQkc6ktSjkM5cvXc7rMmafVpdPdVK8qjnspCpcVIx+kDRYkd5HI4AquA0KIKFFSrtk9EoZr7NOaU6pcFkwsFRIBkAmgUhyAAGUEwmURQ/9HkBdQrK3i72vW3TdBOW1ucno83v3119/vVfgPxdB12Lw51W1uOkxRYP+jIUAqkDCQ0WGxHUpvy6j60TAZKV2n698AkwYYIwEGO8OjJQ8QJF6xBviypFsog75Dp5vkOhVKEiHngpp7fLSF5ou6N702h6N+UZdzFyV/KeSYdbnV+NWQemQYawEUNlJYBd1W8OhWZPjBBlSIyDWTQLI5sNYSILmmQhwTx08KflEgsvEvqCbIzUrCKZPU4LKxUGBq63Ujes38me/OPupQB/QUsdJ75JUAJ5ZH/DYPGIYvBUeUViF3KReU2ReyMrV2nWhcUZu9z3N6PWKstPAsoLgGVz56nGgS8ck9YONZUww/lOsp2VRoPl/Q3KAfEbel+LuQEvcJe3sjku8We3fjZc6NjpXFFnCR+x5lVtwov19rCndVaVYo1ivuFBxg46/z2mlqPXljd6S4RhPOyTao0S9jdtLtrgSeH6cFjIlGbFnHsNxLsWdI3cIui+8LAIapK8R4PLCmyo/x7siX07w0DGBl1xxZ8nz4wZA8XP0mQJTqyExX8+QsULvyzUeF+h7QBU3tcz07vIxKTZUnAAvgyDVJ9pYFzj7Uq3evafjbLMuSS6o6Ip031HZPYah3pno2OPj8sxRjxWssceq8agw88gExdkCPl9uP1tDY47eIaROgGtl8GyRMEWAyyRjSyekODHgVj3bycnF9f8He7Ld3V0dHe3tbdrKsoYz7G5LT6fk7skbeL+oSJlfboy511WnGJ4EAShDD0RUKs4QyNkydKaImKZ3vsXzq6yJipPjyCdk3WiXlMXAmVPoPbaqLFt3FRnHneIsK6IeSq5DHnBDefQ2R1ouOJAfdaKTzLDhSRGQbAAi+P4OYIDPkIvz31eqBALgDBv+yw1XQshiA7N7XoTQi+wy1fF5/j8xPyrqEJFsY4mc5MhjMv6dgKu+hW+CgKRuVplyRYAzTDxCUJmIgQA+UwMcQACjV9l44QGAZf/BO15SPIzp+YmEb5KAwQaychABDTH+TuoEmAfoHaAeyfvGwv8BSFZ2xVS9QgcAAAAASUVORK5CYII=")
KEXP_MIC = base64.decode("/9j/4AAQSkZJRgABAQAASABIAAD/4QOeRXhpZgAATU0AKgAAAAgACwEPAAIAAAASAAAAkgEQAAIAAAALAAAApAESAAMAAAABAAEAAAEaAAUAAAABAAAAsAEbAAUAAAABAAAAuAEoAAMAAAABAAIAAAExAAIAAAAqAAAAwAEyAAIAAAAUAAAA6gE7AAIAAAAPAAAA/oKYAAIAAAAbAAABDodpAAQAAAABAAABKgAAAABOSUtPTiBDT1JQT1JBVElPTgBOSUtPTiBENzUwAAAAAABIAAAAAQAAAEgAAAABQWRvYmUgUGhvdG9zaG9wIExpZ2h0cm9vbSA1LjcgKE1hY2ludG9zaCkAMjAxODowMToxNSAxNjoyODozOABSZW5hdGEgU3RlaW5lcgAATmF0YXdvcnJ5IFBob3RvZ3JhcGh5IDIwMTgAAAAmgpoABQAAAAEAAAL4gp0ABQAAAAEAAAMAiCIAAwAAAAEAAQAAiCcAAwAAAAEMgAAAiDAAAwAAAAEAAgAAkAAABwAAAAQwMjMwkAMAAgAAABQAAAMIkAQAAgAAABQAAAMckgEACgAAAAEAAAMwkgIABQAAAAEAAAM4kgQACgAAAAEAAANAkgUABQAAAAEAAANIkgcAAwAAAAEABQAAkggAAwAAAAEAAAAAkgkAAwAAAAEAEAAAkgoABQAAAAEAAANQkpEAAgAAAAMzMAAAkpIAAgAAAAMzMAAAoAEAAwAAAAEAAQAAoAIABAAAAAEAAABIoAMABAAAAAEAAABIohcAAwAAAAEAAgAAowAABwAAAAEDAAAAowEABwAAAAEBAAAApAEAAwAAAAEAAAAApAIAAwAAAAEAAQAApAMAAwAAAAEAAQAApAQABQAAAAEAAANYpAUAAwAAAAEAVQAApAYAAwAAAAEAAAAApAcAAwAAAAEAAgAApAgAAwAAAAEAAAAApAkAAwAAAAEAAAAApAoAAwAAAAEAAAAApAwAAwAAAAEAAAAApDEAAgAAAAgAAANgpDIABQAAAAQAAANopDQAAgAAAA4AAAOIAAAAAAAAAAEAAACgAAAABwAAAAIyMDE4OjAxOjE1IDEwOjMzOjQ2ADIwMTg6MDE6MTUgMTA6MzM6NDYAAABgIQAADSEAAL+YAAA1AQAAAAAAAAABAAAACAAAAAUAAABVAAAAAQAAAAEAAAABMzAyNzAwMQAAAABVAAAAAQAAAFUAAAABAAAACQAAAAUAAAAJAAAABTg1LjAgbW0gZi8xLjgA/+Eh+2h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczpjcnM9Imh0dHA6Ly9ucy5hZG9iZS5jb20vY2FtZXJhLXJhdy1zZXR0aW5ncy8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9tZWNoYW5pYz0iaHR0cDovL25zLmNhbWVyYWJpdHMuY29tL3Bob3RvbWVjaGFuaWMvMS4wLyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmF1eD0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC9hdXgvIiB4bWxuczp4bXBSaWdodHM9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9yaWdodHMvIiB4bWxuczpJcHRjNHhtcENvcmU9Imh0dHA6Ly9pcHRjLm9yZy9zdGQvSXB0YzR4bXBDb3JlLzEuMC94bWxucy8iIGNyczpWaWduZXR0ZUFtb3VudD0iMCIgY3JzOkNhbWVyYVByb2ZpbGU9IkFkb2JlIFN0YW5kYXJkIiBjcnM6VmVyc2lvbj0iOC43IiBjcnM6UmVkU2F0dXJhdGlvbj0iMCIgY3JzOlNoYWRvd3MyMDEyPSIwIiBjcnM6U2F0dXJhdGlvbkFkanVzdG1lbnRBcXVhPSIwIiBjcnM6Q29sb3JOb2lzZVJlZHVjdGlvbkRldGFpbD0iNTAiIGNyczpMdW1pbmFuY2VBZGp1c3RtZW50Qmx1ZT0iMCIgY3JzOkxlbnNQcm9maWxlRW5hYmxlPSIwIiBjcnM6SGlnaGxpZ2h0czIwMTI9IjAiIGNyczpIdWVBZGp1c3RtZW50T3JhbmdlPSIwIiBjcnM6VmlicmFuY2U9IjAiIGNyczpTcGxpdFRvbmluZ0hpZ2hsaWdodFNhdHVyYXRpb249IjAiIGNyczpIYXNDcm9wPSJGYWxzZSIgY3JzOlBlcnNwZWN0aXZlUm90YXRlPSIwLjAiIGNyczpTaGFycGVuRGV0YWlsPSIyNSIgY3JzOlBlcnNwZWN0aXZlVXByaWdodD0iMCIgY3JzOlNoYXJwZW5FZGdlTWFza2luZz0iMCIgY3JzOkRlZnJpbmdlUHVycGxlSHVlTG89IjMwIiBjcnM6RGVmcmluZ2VHcmVlbkh1ZUxvPSI0MCIgY3JzOlBlcnNwZWN0aXZlU2NhbGU9IjEwMCIgY3JzOlNwbGl0VG9uaW5nQmFsYW5jZT0iMCIgY3JzOkNvbG9yTm9pc2VSZWR1Y3Rpb25TbW9vdGhuZXNzPSI1MCIgY3JzOlBhcmFtZXRyaWNIaWdobGlnaHRzPSIwIiBjcnM6THVtaW5hbmNlQWRqdXN0bWVudEdyZWVuPSIwIiBjcnM6SHVlQWRqdXN0bWVudEFxdWE9IjAiIGNyczpQYXJhbWV0cmljU2hhZG93cz0iMCIgY3JzOlRvbmVDdXJ2ZU5hbWU9IkxpbmVhciIgY3JzOkNvbG9yTm9pc2VSZWR1Y3Rpb249IjI1IiBjcnM6TGVuc1Byb2ZpbGVTZXR1cD0iTGVuc0RlZmF1bHRzIiBjcnM6R3JlZW5IdWU9IjAiIGNyczpQZXJzcGVjdGl2ZUhvcml6b250YWw9IjAiIGNyczpTYXR1cmF0aW9uQWRqdXN0bWVudEdyZWVuPSIwIiBjcnM6THVtaW5hbmNlTm9pc2VSZWR1Y3Rpb25EZXRhaWw9IjUwIiBjcnM6THVtaW5hbmNlU21vb3RoaW5nPSIyMCIgY3JzOlRvbmVDdXJ2ZU5hbWUyMDEyPSJMaW5lYXIiIGNyczpQYXJhbWV0cmljTGlnaHRzPSIwIiBjcnM6UGFyYW1ldHJpY1NoYWRvd1NwbGl0PSIyNSIgY3JzOkRlZnJpbmdlR3JlZW5IdWVIaT0iNjAiIGNyczpHcmFpbkFtb3VudD0iMCIgY3JzOlNhdHVyYXRpb25BZGp1c3RtZW50TWFnZW50YT0iMCIgY3JzOkNvbnRyYXN0MjAxMj0iKzExIiBjcnM6UGVyc3BlY3RpdmVWZXJ0aWNhbD0iMCIgY3JzOlNwbGl0VG9uaW5nU2hhZG93SHVlPSIwIiBjcnM6U2F0dXJhdGlvbkFkanVzdG1lbnRPcmFuZ2U9IjAiIGNyczpIdWVBZGp1c3RtZW50UmVkPSIwIiBjcnM6U3BsaXRUb25pbmdTaGFkb3dTYXR1cmF0aW9uPSIwIiBjcnM6U2F0dXJhdGlvbkFkanVzdG1lbnRCbHVlPSIwIiBjcnM6QXV0b1doaXRlVmVyc2lvbj0iMTM0MzQ4ODAwIiBjcnM6THVtaW5hbmNlTm9pc2VSZWR1Y3Rpb25Db250cmFzdD0iMCIgY3JzOldoaXRlQmFsYW5jZT0iQXMgU2hvdCIgY3JzOkJsdWVTYXR1cmF0aW9uPSIwIiBjcnM6THVtaW5hbmNlQWRqdXN0bWVudEFxdWE9IjAiIGNyczpQYXJhbWV0cmljTWlkdG9uZVNwbGl0PSI1MCIgY3JzOkV4cG9zdXJlMjAxMj0iMC4wMCIgY3JzOkx1bWluYW5jZUFkanVzdG1lbnRZZWxsb3c9IjAiIGNyczpIdWVBZGp1c3RtZW50Qmx1ZT0iMCIgY3JzOlRlbXBlcmF0dXJlPSI0MjUwIiBjcnM6U2hhZG93VGludD0iMCIgY3JzOlBhcmFtZXRyaWNIaWdobGlnaHRTcGxpdD0iNzUiIGNyczpIdWVBZGp1c3RtZW50UHVycGxlPSIwIiBjcnM6THVtaW5hbmNlQWRqdXN0bWVudFB1cnBsZT0iMCIgY3JzOlRpbnQ9IisxIiBjcnM6RGVmcmluZ2VQdXJwbGVIdWVIaT0iNzAiIGNyczpSZWRIdWU9IjAiIGNyczpQYXJhbWV0cmljRGFya3M9IjAiIGNyczpDb252ZXJ0VG9HcmF5c2NhbGU9IkZhbHNlIiBjcnM6SHVlQWRqdXN0bWVudE1hZ2VudGE9IjAiIGNyczpTaGFycGVuUmFkaXVzPSIrMS4wIiBjcnM6U2hhcnBuZXNzPSIyNSIgY3JzOlByb2Nlc3NWZXJzaW9uPSI2LjciIGNyczpXaGl0ZXMyMDEyPSIrMzIiIGNyczpMdW1pbmFuY2VBZGp1c3RtZW50T3JhbmdlPSIwIiBjcnM6UGVyc3BlY3RpdmVBc3BlY3Q9IjAiIGNyczpCbGFja3MyMDEyPSIwIiBjcnM6THVtaW5hbmNlQWRqdXN0bWVudFJlZD0iMCIgY3JzOlNwbGl0VG9uaW5nSGlnaGxpZ2h0SHVlPSIwIiBjcnM6Qmx1ZUh1ZT0iMCIgY3JzOkhhc1NldHRpbmdzPSJUcnVlIiBjcnM6RGVmcmluZ2VQdXJwbGVBbW91bnQ9IjAiIGNyczpBdXRvTGF0ZXJhbENBPSIwIiBjcnM6THVtaW5hbmNlQWRqdXN0bWVudE1hZ2VudGE9IjAiIGNyczpTYXR1cmF0aW9uQWRqdXN0bWVudFJlZD0iMCIgY3JzOkxlbnNNYW51YWxEaXN0b3J0aW9uQW1vdW50PSIwIiBjcnM6U2F0dXJhdGlvbkFkanVzdG1lbnRZZWxsb3c9IjAiIGNyczpIdWVBZGp1c3RtZW50R3JlZW49IjAiIGNyczpTYXR1cmF0aW9uQWRqdXN0bWVudFB1cnBsZT0iMCIgY3JzOkh1ZUFkanVzdG1lbnRZZWxsb3c9IjAiIGNyczpHcmVlblNhdHVyYXRpb249IjAiIGNyczpBbHJlYWR5QXBwbGllZD0iVHJ1ZSIgY3JzOkRlZnJpbmdlR3JlZW5BbW91bnQ9IjAiIGNyczpQb3N0Q3JvcFZpZ25ldHRlQW1vdW50PSIwIiBjcnM6Q2xhcml0eTIwMTI9IjAiIGNyczpTYXR1cmF0aW9uPSIwIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9IkExM0IyQTI3Q0NFOThDQTE5RjgyQzRCN0M2NEI4NjFGIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMzMjY1MjJmLTMzOWYtNDdkNS1iNjIyLTkxOTRmMDI3M2Q5ZiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozMzI2NTIyZi0zMzlmLTQ3ZDUtYjYyMi05MTk0ZjAyNzNkOWYiIGRjOmZvcm1hdD0iaW1hZ2UvanBlZyIgcGhvdG9tZWNoYW5pYzpUYWdnZWQ9IkZhbHNlIiBwaG90b21lY2hhbmljOlByZWZzPSIwOjE6MDowMDAyOTkiIHBob3RvbWVjaGFuaWM6UE1WZXJzaW9uPSJQTTUiIHBob3RvbWVjaGFuaWM6Q29sb3JDbGFzcz0iMSIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wMS0xNVQxNjoyODozOC0wODowMCIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDEtMTVUMTA6MzM6NDYuMzAiIHhtcDpMYWJlbD0iV2lubmVyIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wMS0xNVQxNjoyODozOC0wODowMCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgTGlnaHRyb29tIDUuNyAoTWFjaW50b3NoKSIgcGhvdG9zaG9wOkF1dGhvcnNQb3NpdGlvbj0iUGhvdG9ncmFwaGVyIiBwaG90b3Nob3A6RGF0ZUNyZWF0ZWQ9IjIwMTgtMDEtMTVUMTA6MzM6NDYuMzAiIGF1eDpMZW5zPSI4NS4wIG1tIGYvMS44IiBhdXg6SW1hZ2VOdW1iZXI9IjQ4Mzg3IiBhdXg6QXBwcm94aW1hdGVGb2N1c0Rpc3RhbmNlPSIxMjYvMTAwIiBhdXg6TGVuc0lEPSIxNzkiIGF1eDpTZXJpYWxOdW1iZXI9IjMwMjcwMDEiIGF1eDpMZW5zSW5mbz0iODUwLzEwIDg1MC8xMCAxOC8xMCAxOC8xMCIgeG1wUmlnaHRzOk1hcmtlZD0iVHJ1ZSI+IDxjcnM6VG9uZUN1cnZlPiA8cmRmOlNlcT4gPHJkZjpsaT4wLCAwPC9yZGY6bGk+IDxyZGY6bGk+MjU1LCAyNTU8L3JkZjpsaT4gPC9yZGY6U2VxPiA8L2NyczpUb25lQ3VydmU+IDxjcnM6VG9uZUN1cnZlUFYyMDEyPiA8cmRmOlNlcT4gPHJkZjpsaT4wLCAwPC9yZGY6bGk+IDxyZGY6bGk+MjU1LCAyNTU8L3JkZjpsaT4gPC9yZGY6U2VxPiA8L2NyczpUb25lQ3VydmVQVjIwMTI+IDxjcnM6VG9uZUN1cnZlR3JlZW4+IDxyZGY6U2VxPiA8cmRmOmxpPjAsIDA8L3JkZjpsaT4gPHJkZjpsaT4yNTUsIDI1NTwvcmRmOmxpPiA8L3JkZjpTZXE+IDwvY3JzOlRvbmVDdXJ2ZUdyZWVuPiA8Y3JzOlRvbmVDdXJ2ZUJsdWU+IDxyZGY6U2VxPiA8cmRmOmxpPjAsIDA8L3JkZjpsaT4gPHJkZjpsaT4yNTUsIDI1NTwvcmRmOmxpPiA8L3JkZjpTZXE+IDwvY3JzOlRvbmVDdXJ2ZUJsdWU+IDxjcnM6VG9uZUN1cnZlUFYyMDEyUmVkPiA8cmRmOlNlcT4gPHJkZjpsaT4wLCAwPC9yZGY6bGk+IDxyZGY6bGk+MjU1LCAyNTU8L3JkZjpsaT4gPC9yZGY6U2VxPiA8L2NyczpUb25lQ3VydmVQVjIwMTJSZWQ+IDxjcnM6VG9uZUN1cnZlUFYyMDEyR3JlZW4+IDxyZGY6U2VxPiA8cmRmOmxpPjAsIDA8L3JkZjpsaT4gPHJkZjpsaT4yNTUsIDI1NTwvcmRmOmxpPiA8L3JkZjpTZXE+IDwvY3JzOlRvbmVDdXJ2ZVBWMjAxMkdyZWVuPiA8Y3JzOlRvbmVDdXJ2ZVJlZD4gPHJkZjpTZXE+IDxyZGY6bGk+MCwgMDwvcmRmOmxpPiA8cmRmOmxpPjI1NSwgMjU1PC9yZGY6bGk+IDwvcmRmOlNlcT4gPC9jcnM6VG9uZUN1cnZlUmVkPiA8Y3JzOlRvbmVDdXJ2ZVBWMjAxMkJsdWU+IDxyZGY6U2VxPiA8cmRmOmxpPjAsIDA8L3JkZjpsaT4gPHJkZjpsaT4yNTUsIDI1NTwvcmRmOmxpPiA8L3JkZjpTZXE+IDwvY3JzOlRvbmVDdXJ2ZVBWMjAxMkJsdWU+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGltYWdlL3gtbmlrb24tbmVmIHRvIGltYWdlL2RuZywgc2F2ZWQgdG8gbmV3IGxvY2F0aW9uIi8+IDxyZGY6bGkgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIExpZ2h0cm9vbSA1LjcgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iIHN0RXZ0OndoZW49IjIwMTgtMDEtMTVUMTY6MDk6MjctMDg6MDAiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjA1NGI4MTItMzQ1Zi00OGEwLTllZGMtMjBjNmZiZWI3MjBjIiBzdEV2dDphY3Rpb249InNhdmVkIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBpbWFnZS9kbmcgdG8gaW1hZ2UvanBlZywgc2F2ZWQgdG8gbmV3IGxvY2F0aW9uIi8+IDxyZGY6bGkgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIExpZ2h0cm9vbSA1LjcgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iIHN0RXZ0OndoZW49IjIwMTgtMDEtMTVUMTY6Mjg6MzgtMDg6MDAiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MzMyNjUyMmYtMzM5Zi00N2Q1LWI2MjItOTE5NGYwMjczZDlmIiBzdEV2dDphY3Rpb249InNhdmVkIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJBMTNCMkEyN0NDRTk4Q0ExOUY4MkM0QjdDNjRCODYxRiIgc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpiMDU0YjgxMi0zNDVmLTQ4YTAtOWVkYy0yMGM2ZmJlYjcyMGMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6YjA1NGI4MTItMzQ1Zi00OGEwLTllZGMtMjBjNmZiZWI3MjBjIi8+IDxkYzpjcmVhdG9yPiA8cmRmOlNlcT4gPHJkZjpsaT5SZW5hdGEgU3RlaW5lcjwvcmRmOmxpPiA8L3JkZjpTZXE+IDwvZGM6Y3JlYXRvcj4gPGRjOnJpZ2h0cz4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+TmF0YXdvcnJ5IFBob3RvZ3JhcGh5IDIwMTg8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnJpZ2h0cz4gPElwdGM0eG1wQ29yZTpDcmVhdG9yQ29udGFjdEluZm8gSXB0YzR4bXBDb3JlOkNpVGVsV29yaz0iMjA2MzQ5MDQxNCIgSXB0YzR4bXBDb3JlOkNpQWRyQ3RyeT0iVVNBIiBJcHRjNHhtcENvcmU6Q2lVcmxXb3JrPSJuYXRhd29ycnkuY29tIiBJcHRjNHhtcENvcmU6Q2lBZHJQY29kZT0iOTgxMTciIElwdGM0eG1wQ29yZTpDaUFkclJlZ2lvbj0iV0EiIElwdGM0eG1wQ29yZTpDaUFkckNpdHk9IlNlYXR0bGUiIElwdGM0eG1wQ29yZTpDaUVtYWlsV29yaz0ibmF0YXdvcnJ5QGdtYWlsLmNvbSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+AP/tALpQaG90b3Nob3AgMy4wADhCSU0EBAAAAAAAghwBWgADGyVHHAIAAAIAAhwCUAAOUmVuYXRhIFN0ZWluZXIcAlUADFBob3RvZ3JhcGhlchwCPgAIMjAxODAxMTUcAj8ABjEwMzM0NhwCNwAIMjAxODAxMTUcAjwABjEwMzM0NhwCdAAaTmF0YXdvcnJ5IFBob3RvZ3JhcGh5IDIwMTg4QklNBCUAAAAAABD0oECQo6UCJ5vs+3c028Kk/8AAEQgASABIAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMC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")

def api_error():
    print("Error connecting to the API")
    return render.Root(
        child = render.Row(
            cross_align = "center",
            main_align = "space_between",
            expanded = True,
            children = [
                render.Padding(child = render.Image(src = KEXP_VINYL, height = 26, width = 26), pad = 1),
                render.Column(
                    cross_align = "end",
                    main_align = "space_between",
                    children = [
                        render.Text("Unable", font = "tb-8", color = "#FF2222"),
                        render.Text("to", font = "tb-8", color = "#FF2222"),
                        render.Text("connect", font = "tb-8", color = "#FF2222"),
                        render.Text("to KEXP", font = "tb-8", color = "#FF2222"),
                    ],
                ),
            ],
        ),
    )

def now_playing(song, artist, album):
    return render.Root(
        child = render.Column(
            children = [
                render.Stack(
                    children = [
                        render.Box(
                            width = 64,
                            height = 24,
                            color = "e68a00",
                        ),
                        render.Row(
                            expanded = True,
                            main_align = "space_evenly",
                            children = [
                                render.Padding(
                                    child = render.Image(src = album, height = 22, width = 22),
                                    pad = 1,
                                ),
                                render.Padding(
                                    child = render.Image(src = KEXP_LOGO, height = 22, width = 22),
                                    pad = 1,
                                ),
                            ],
                        ),
                    ],
                ),
                render.Stack(
                    children = [
                        render.Box(
                            width = 64,
                            height = 12,
                            color = "#000000",
                        ),
                        render.Marquee(
                            width = 64,
                            offset_start = 64,
                            child = render.Text("%s - %s" % (song, artist), font = "tb-8", color = "#e6e6e6"),
                        ),
                    ],
                ),
            ],
        ),
    )

def main():
    jplay = http.get(url = KEXP_PLAY, ttl_seconds = 120)
    jshow = http.get(url = KEXP_SHOW, ttl_seconds = 120)

    if (jplay.status_code or jshow.status_code) != 200:
        return api_error()

    playtype = jplay.json()["results"][0]["play_type"]

    host = jshow.json()["results"][0]["hosts"][0].get("name", "")
    if host == "":
        host = "KEXP DJ"

    song = jplay.json()["results"][0].get("song", host)
    artist = jplay.json()["results"][0].get("artist", "Airbreak")

    if playtype == "airbreak":
        hostimg = jshow.json()["results"][0]["hosts"][0].get("newimageuri", "")
        if hostimg == "":
            album = KEXP_MIC
        else:
            album = http.get(hostimg).body()
    elif playtype == "trackplay":
        thumbnail = jplay.json()["results"][0].get("thumbnail_uri", "")
        if thumbnail == "":
            album = KEXP_VINYL
        else:
            album = http.get(thumbnail).body()
    else:
        song = "- - - - -"
        artist = "- - - -"
        album = KEXP_VINYL

    return now_playing(song, artist, album)
